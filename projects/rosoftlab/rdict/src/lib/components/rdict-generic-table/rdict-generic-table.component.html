<kendo-grid  [data]="dataSource" [sortable]="true"  [filterable]="showSerach" [resizable]="true" (add)="addHandler()"
  (edit)="editHandler($event)" (remove)="removeHandler($event)"
  (filterChange)="filterChange($event)"
  (dataStateChange)="dataStateChange($event)"

  [pageable]="{pageSizes:pageSizes}"  [pageSize]="state.take"
  [skip]="state.skip"  [sort]="state.sort" >
  <kendo-toolbar>
    <table-title text="{{title}}"></table-title>
    <kendo-toolbar-messages>Test</kendo-toolbar-messages>
    <!-- <kendo-toolbar-separator></kendo-toolbar-separator> -->
    <kendo-toolbar-spacer></kendo-toolbar-spacer>
    @if (hasAdd) {
      <kendo-toolbar-button kendoButton [svgIcon]="svgAdd" text="Add new" kendoGridAddTool></kendo-toolbar-button>
    }
  </kendo-toolbar>

  <!-- <kendo-toolbar>

  <kendo-toolbar-spacer></kendo-toolbar-spacer>
  <button kendoGridAddCommand type="button">Add new</button>
</kendo-toolbar> -->
<!-- <kendo-grid-column *ngFor="let column of allColumns" field="{{ column.propertyName }}"
title=" {{column.translateKey | translate}}">
</kendo-grid-column> -->

@for (column of allColumns; track column) {
  <kendo-grid-column [field]="column.propertyName"
    [title]="column.translateKey | translate" [format]="column.format" [filter]="inferFilterType(column)">
    <!-- Use ng-template to customize the column content -->
    @if (column.isEditLink) {
      <ng-template kendoGridCellTemplate let-dataItem>
        <!-- Create a link that calls editHandler(dataItem) -->
        <a href="javascript:void(0)" (click)="edit(dataItem,column)" class="edit-link">
          {{ getCellValue(dataItem,column) }}
        </a>
      </ng-template>
    } @else {
      {{ getCellValue(dataItem,column) }}
    }
    <!-- <ng-template *ngIf="column.type=='reference'; else defaultTemplate" kendoGridCellTemplate let-dataItem>
    <a href="javascript:void(0)" (click)="edit(dataItem)" class="edit-link">
      {{ getCellValue$(dataItem,column) | async }}
    </a>
  </ng-template> -->
  <!-- Default template for non-link columns -->
</kendo-grid-column>
}


@if (canEdit && canDelete) {
  <kendo-grid-command-column title="" [width]="100">
    <ng-template kendoGridCellTemplate>
      <!-- <button kendoButton  kendoGridEditCommand  [svgIcon]="svgEdit" themeColor="light" ></button>
      <button kendoButton  kendoGridRemoveCommand [svgIcon]="svgDelete" themeColor="error"></button> -->
      @if (canEdit) {
        <button kendoGridEditCommand [svgIcon]="svgEdit" themeColor="light"></button>
      }
      @if (canDelete) {
        <button kendoGridRemoveCommand [svgIcon]="svgDelete" themeColor="error"></button>
      }
    </ng-template>
  </kendo-grid-command-column>
}
</kendo-grid>
<div kendoDialogContainer></div>